<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acesso SGP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body class="bg-slate-900 h-screen flex items-center justify-center p-4 font-sans text-slate-800">

    <div class="bg-white w-full max-w-sm p-8 rounded-2xl shadow-2xl border-t-4 border-orange-600">
        <div class="text-center mb-6">
            <h1 class="text-2xl font-black text-slate-800 uppercase tracking-widest">SGP POLICIAL</h1>
            <p class="text-xs text-slate-500 font-bold mt-1">Acesso Restrito (Firebase)</p>
        </div>

        <div class="space-y-4">
            <input type="email" id="email" class="w-full border-2 border-slate-200 p-3 rounded-lg font-bold outline-none focus:border-orange-500 text-slate-700" placeholder="Seu e-mail">
            <input type="password" id="senha" class="w-full border-2 border-slate-200 p-3 rounded-lg font-bold outline-none focus:border-orange-500 text-slate-700" placeholder="Sua senha">
            
            <button id="btn-entrar" class="w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 rounded-lg shadow transition uppercase text-xs tracking-widest">
                ENTRAR
            </button>
            <button id="btn-criar" class="w-full bg-white border border-slate-300 text-slate-500 hover:bg-slate-50 font-bold py-3 rounded-lg transition uppercase text-xs tracking-widest">
                CRIAR CONTA
            </button>
            
            <p id="msg" class="text-center text-xs font-bold hidden p-3 rounded"></p>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // SUA CONFIGURAÇÃO DO FIREBASE (JÁ INSERIDA)
        const firebaseConfig = {
            apiKey: "AIzaSyA-q94iSIsQuRl1xS1S8vw2RkDAxMzZoLk",
            authDomain: "sgp-patio.firebaseapp.com",
            projectId: "sgp-patio",
            storageBucket: "sgp-patio.firebasestorage.app",
            messagingSenderId: "264796636092",
            appId: "1:264796636092:web:91d69d0853df208c9761b9"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Se já estiver logado, joga pro sistema
        onAuthStateChanged(auth, (user) => { if (user) window.location.href = "index.html"; });

        // Função Entrar
        document.getElementById('btn-entrar').onclick = async () => {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('senha').value;
            if(!email || !pass) return mostrarErro("Preencha tudo.");
            
            try {
                await signInWithEmailAndPassword(auth, email, pass);
                window.location.href = "index.html";
            } catch (e) { mostrarErro("Erro: " + e.code); }
        };

        // Função Criar Conta
        document.getElementById('btn-criar').onclick = async () => {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('senha').value;
            if(!email || !pass) return mostrarErro("Preencha tudo.");
            
            if(!confirm("Deseja criar um novo usuário para " + email + "?")) return;

            try {
                await createUserWithEmailAndPassword(auth, email, pass);
                mostrarErro("Conta criada! Entrando...", true);
                setTimeout(() => window.location.href = "index.html", 1500);
            } catch (e) { mostrarErro("Erro ao criar: " + e.code); }
        };

        function mostrarErro(txt, success=false) {
            const el = document.getElementById('msg');
            el.innerText = txt;
            el.className = `text-center text-xs font-bold p-3 rounded ${success ? 'bg-green-100 text-green-700':'bg-red-100 text-red-700'}`;
            el.classList.remove('hidden');
        }
    </script>
</body>
</html>
